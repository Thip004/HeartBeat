<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Heartbeat ‚Äî for Us</title>
  <meta name="description" content="A tiny site with a beating heart, synced EKG, BPM, and gentle messages." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="newfav.png">
  <style>
    :root{
      --bpm: 82;
      --beat-sec: 0.7317s;
      --bg: #fff7fb;
      --ink: #1f2937;
      --heart: #ff5fa2;
      --heart-dark: #ff2e85;
      --accent: #7c3aed;
      --glow: 0 0 24px rgba(255,95,162,.45);
      --grid: rgba(124,58,237,.08);
      --card: #ffffffee;
      --radius: 22px;

    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; display:grid; place-items:center; min-height:100%;
      background:
        radial-gradient(1200px 800px at 100% -20%, #fde2ff 0%, transparent 60%),
        radial-gradient(1000px 600px at -10% 110%, #e0f2fe 0%, transparent 60%),
        var(--bg);
      color:var(--ink);
      font-family: 'Quicksand', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      line-height:1.4;
      padding:24px;
      overflow-x: hidden;
    }
    .wrap{ max-width:980px; width:100%; position: relative; }

    /* Floating hearts background */
    .floating-hearts{
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }
    .float-heart{
      position: absolute;
      font-size: 24px;
      opacity: 0;
      animation: floatUp 10s ease-in-out infinite;
      will-change: transform, opacity;
    }
    @keyframes floatUp{
      0%{ 
        transform: translateY(100vh) translateX(0) rotate(0deg) scale(0.8); 
        opacity: 0; 
      }
      5%{ opacity: 0.7; }
      15%{ opacity: 0.85; }
      50%{ opacity: 0.6; transform: translateY(50vh) translateX(30px) rotate(180deg) scale(1); }
      85%{ opacity: 0.3; }
      100%{ 
        transform: translateY(-120px) translateX(-20px) rotate(360deg) scale(0.6); 
        opacity: 0; 
      }
    }

    .card{
      background:var(--card);
      backdrop-filter: blur(6px);
      box-shadow: 0 10px 30px rgba(31,41,55,.08);
      border-radius: var(--radius);
      padding: clamp(18px, 3vw, 28px);
      border: 1px solid rgba(124,58,237,.12);
      position: relative;
      z-index: 1;

    }

    header{ text-align:center; margin-bottom: 20px; }
    header h1{
      font-family: 'Nunito', system-ui, sans-serif;
      font-weight:900; letter-spacing:.3px; margin:.1em 0 .2em; font-size: clamp(28px, 4.6vw, 44px);
      background: linear-gradient(135deg, #ff5fa2 0%, #7c3aed 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    header p{ opacity:.8; margin:0; font-size:clamp(14px, 2.2vw, 18px)}

    /* HEART with sparkles */
    .heart-zone{ display:grid; place-items:center; gap:10px; margin-top:8px; position: relative; }
    .heart-container{ position: relative; }
    .heart{
      font-size: 140px;
      line-height: 1;
      filter: drop-shadow(0 8px 20px rgba(255,46,133,.35));
      animation: beat var(--beat-sec) ease-in-out infinite;
      user-select: none;
    }
    @keyframes beat{
      0%, 100%{ transform: scale(1) }
      15%{ transform: scale(1.1) }
      30%{ transform: scale(0.98) }
      45%{ transform: scale(1.08) }
      60%{ transform: scale(1) }
    }

    /* Sparkles around heart */
    .sparkle{
      position: absolute;
      font-size: 20px;
      animation: sparkle 2s ease-in-out infinite;
      pointer-events: none;
    }
    .sparkle:nth-child(1){ top: 5%; left: 5%; animation-delay: 0s; }
    .sparkle:nth-child(2){ top: 10%; right: 10%; animation-delay: 0.3s; }
    .sparkle:nth-child(3){ bottom: 15%; left: 0%; animation-delay: 0.6s; }
    .sparkle:nth-child(4){ bottom: 10%; right: 5%; animation-delay: 0.9s; }
    .sparkle:nth-child(5){ top: 50%; left: -5%; animation-delay: 0.4s; }
    .sparkle:nth-child(6){ top: 50%; right: -5%; animation-delay: 0.7s; }
    @keyframes sparkle{
      0%, 100%{ opacity: 0; transform: scale(0) rotate(0deg); }
      50%{ opacity: 1; transform: scale(1.2) rotate(180deg); }
    }

    .bpm{
      font-weight:700; font-size: clamp(16px, 3vw, 22px);
      background: linear-gradient(135deg, #fff 0%, #fce7f3 100%);
      border-radius: 999px; padding:8px 16px; 
      border:2px solid rgba(255,95,162,.3);
      display:inline-flex; align-items:center; gap:8px;
      box-shadow: 0 6px 18px rgba(124,58,237,.12), 0 0 0 4px rgba(255,95,162,.05);
      transition: transform 0.2s ease;
    }
    .bpm:hover{ transform: translateY(-2px); }
    .pulse-dot{ 
      width:12px; height:12px; border-radius:50%; 
      background: radial-gradient(circle, #ff5fa2, #7c3aed);
      box-shadow: 0 0 12px rgba(255,95,162,.6), 0 0 24px rgba(124,58,237,.3);
      animation: dot var(--beat-sec) ease-in-out infinite; 
    }
    @keyframes dot{ 
      0%,100%{ transform: scale(1)} 
      45%{ transform: scale(1.6); box-shadow: 0 0 20px rgba(255,95,162,.8), 0 0 30px rgba(124,58,237,.5); }
    }

    /* EKG */
    .ekg-wrap{ position:relative; margin: 22px 0 8px; }
    .grid{
      position:absolute; inset:0; background:
        linear-gradient(var(--grid) 1px, transparent 1px) 0 0/ 100% 16px,
        linear-gradient(90deg, var(--grid) 1px, transparent 1px) 0 0/ 16px 100%;
      border-radius: 14px; pointer-events:none; 
      mask: linear-gradient(180deg, transparent, #000 16px calc(100% - 16px), transparent);
    }
    svg{ 
      width:100%; height:180px; display:block; border-radius: 14px; 
      background: linear-gradient(180deg, #fff 0%, #fef3f9 100%); 
      border:2px solid rgba(124,58,237,.2); 
      box-shadow: inset 0 2px 8px rgba(255,95,162,.08);
    }
    .line{ 
      fill:none; 
      stroke: url(#lineGradient);
      stroke-width:3.2; 
      stroke-linejoin:round; 
      filter: drop-shadow(0 0 12px rgba(236,72,153,.4)); 
    }
    .sweep{ stroke:#7c3aed; stroke-width:2; stroke-dasharray:6 8; opacity:.65 }

    /* Messages with icon */
    .msg{
      margin-top: 14px; text-align:center; font-size: clamp(16px, 3.2vw, 20px); font-weight:600;
      padding: 16px 20px; border-radius: 16px; 
      background: linear-gradient(135deg, #fff 0%, #fef3f9 100%);
      border: 2px solid rgba(255,95,162,.25);
      box-shadow: 0 8px 20px rgba(124,58,237,.08), 0 0 0 4px rgba(255,95,162,.03);
      position: relative;
      overflow: hidden;
      animation: msgFade 0.5s ease;
    }
    @keyframes msgFade{
      from{ opacity: 0; transform: translateY(10px); }
      to{ opacity: 1; transform: translateY(0); }
    }
    .msg::before{
      content: 'üíù';
      position: absolute;
      top: -10px;
      right: -10px;
      font-size: 40px;
      opacity: 0.1;
      transform: rotate(20deg);
    }

    .controls{ 
      display:flex; gap:12px; justify-content:center; align-items:center; 
      margin-top:12px; flex-wrap:wrap 
    }
    .pill{ 
      border:2px solid rgba(124,58,237,.25); 
      background: linear-gradient(135deg, white 0%, #faf5ff 100%);
      padding:10px 18px; border-radius:999px; font-weight:600; cursor:pointer;
      transition: all 0.2s ease;
      box-shadow: 0 4px 12px rgba(124,58,237,.08);
      font-size: 15px;
    }
    .pill:hover{
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(124,58,237,.15);
      border-color: rgba(255,95,162,.4);
    }
    .pill:active{
      transform: translateY(0);
    }
    .pill:focus-visible{ 
      outline: 3px solid #c4b5fd;
      outline-offset: 2px;
    }

    footer{ 
      text-align:center; margin-top: 20px; opacity:.7; font-size: 14px;
      font-style: italic;
    }

    .sound-toggle{
      position: absolute;
      top: 16px;
      right: 16px;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      border: 2px solid rgba(124,58,237,.25);
      background: linear-gradient(135deg, white 0%, #faf5ff 100%);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(124,58,237,.12);
    }
    .sound-toggle:hover{
      transform: scale(1.1);
      box-shadow: 0 6px 16px rgba(124,58,237,.2);
      border-color: rgba(255,95,162,.4);
    }
    .sound-toggle:active{
      transform: scale(0.95);
    }
    .sound-toggle.active{
      background: linear-gradient(135deg, #ff5fa2 0%, #7c3aed 100%);
      border-color: rgba(255,95,162,.5);
    }

    @media (prefers-reduced-motion: reduce){
      .heart, .pulse-dot, .sweep, .line, .sparkle, .float-heart, .msg{ animation: none !important }
    }
  </style>
</head>
<body>
  <div class="floating-hearts" id="floatingHearts" aria-hidden="true"></div>

  <div class="wrap">
    <div class="card">
      <button class="sound-toggle" id="soundToggle" type="button" aria-label="Toggle heartbeat sound" title="Toggle heartbeat sound">
        üîá
      </button>
      <header>
        <h1>My Heart, Always üíó</h1>
        <p>Deep breaths. In for 4, hold for 4, out for 6. I'm right here with you.</p>
      </header>

      <section class="heart-zone" aria-live="polite">
        <div class="heart-container">
          <div class="sparkle">‚ú®</div>
          <div class="sparkle">üí´</div>
          <div class="sparkle">‚≠ê</div>
          <div class="sparkle">‚ú®</div>
          <div class="sparkle">üåü</div>
          <div class="sparkle">üí´</div>
          <div class="heart" role="img" aria-label="A cute pink heart beating">üíó</div>
        </div>
        <div class="bpm"><span class="pulse-dot" aria-hidden="true"></span> <span id="bpm">82</span> BPM</div>

        <div class="ekg-wrap">
          <svg viewBox="0 0 1200 180" preserveAspectRatio="none" aria-hidden="true">
            <defs>
              <linearGradient id="lineGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" style="stop-color:#ec4899;stop-opacity:1" />
                <stop offset="50%" style="stop-color:#ff5fa2;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#7c3aed;stop-opacity:1" />
              </linearGradient>
            </defs>
            <path id="ekgLine" class="line"
              d="M0 90
                 L120 90 140 86 160 90 180 94 220 90
                 L280 90 300 90 320 90 330 60 340 140 350 90 370 90 420 90
                 460 90 470 80 480 90 490 100 500 90 600 90
                 740 90 760 90 780 90 790 60 800 140 810 90 840 90
                 920 90 940 90 960 90 980 92 1000 90 1100 90 1200 90"/>
            <path id="sweep" class="sweep" d="M0 0 L0 180"/>
          </svg>
          <div class="grid" aria-hidden="true"></div>
        </div>

        <div id="message" class="msg" role="status">Loading a little love note‚Ä¶</div>
        <div class="controls">
          <button class="pill" id="prev" type="button">‚óÄÔ∏é Previous</button>
          <button class="pill" id="next" type="button">Next ‚ñ∂Ô∏é</button>
        </div>
      </section>

      <footer>
        Built with love for our anniversary ‚ú®
      </footer>
    </div>
  </div>

  <script>
    // ---- Web Audio API for heartbeat sound ----
    let audioContext = null;
    let soundEnabled = false;

    function initAudio(){
      if(!audioContext){
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
      }
    }

    function playHeartbeat(){
      if(!soundEnabled || !audioContext) return;

      const now = audioContext.currentTime;

      // First thump (LUB) - lower, deeper
      const osc1 = audioContext.createOscillator();
      const gain1 = audioContext.createGain();
      
      osc1.type = 'sine';
      osc1.frequency.setValueAtTime(80, now);
      osc1.frequency.exponentialRampToValueAtTime(40, now + 0.1);
      
      gain1.gain.setValueAtTime(0.45, now);
      gain1.gain.exponentialRampToValueAtTime(0.01, now + 0.15);
      
      osc1.connect(gain1);
      gain1.connect(audioContext.destination);
      
      osc1.start(now);
      osc1.stop(now + 0.15);

      // Second thump (DUB) - slightly higher, quieter
      const osc2 = audioContext.createOscillator();
      const gain2 = audioContext.createGain();
      
      osc2.type = 'sine';
      osc2.frequency.setValueAtTime(100, now + 0.15);
      osc2.frequency.exponentialRampToValueAtTime(50, now + 0.25);
      
      gain2.gain.setValueAtTime(0.35, now + 0.15);
      gain2.gain.exponentialRampToValueAtTime(0.01, now + 0.28);
      
      osc2.connect(gain2);
      gain2.connect(audioContext.destination);
      
      osc2.start(now + 0.15);
      osc2.stop(now + 0.28);
    }

    // Sound toggle button
    const soundBtn = document.getElementById('soundToggle');
    soundBtn.addEventListener('click', ()=>{
      initAudio();
      soundEnabled = !soundEnabled;
      soundBtn.textContent = soundEnabled ? 'üîä' : 'üîá';
      soundBtn.classList.toggle('active', soundEnabled);
      
      if(soundEnabled){
        playHeartbeat(); // Play immediately on enable
      }
    });

    // ---- Floating hearts background (MORE hearts!) ----
    const heartsContainer = document.getElementById('floatingHearts');
    const heartEmojis = ['üíó', 'üíñ', 'üíï', 'üíì', 'üíù', 'üíò', '‚ù§Ô∏è', 'ü©∑', 'ü•∞'];
    
    function createFloatingHeart(){
      const heart = document.createElement('div');
      heart.className = 'float-heart';
      heart.textContent = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
      heart.style.left = Math.random() * 100 + '%';
      heart.style.fontSize = (18 + Math.random() * 16) + 'px';
      heart.style.animationDuration = (8 + Math.random() * 5) + 's';
      heart.style.animationDelay = Math.random() * 2 + 's';
      heartsContainer.appendChild(heart);
      
      setTimeout(() => heart.remove(), 13000);
    }
    
    // Create MORE floating hearts more frequently!
    setInterval(createFloatingHeart, 1200);
    
    // Initial burst of hearts
    for(let i = 0; i < 8; i++){
      setTimeout(createFloatingHeart, i * 300);
    }

    // ---- Timing synced to BPM ----
    const BPM = 82;
    const beatMs = Math.round((60 / BPM) * 1000);
    document.getElementById('bpm').textContent = BPM;
    document.documentElement.style.setProperty('--beat-sec', `${beatMs/1000}s`);

    // ---- EKG animation ----
    const ekg = document.getElementById('ekgLine');
    const sweep = document.getElementById('sweep');

    function setupEKG(){
      const length = ekg.getTotalLength();
      ekg.style.strokeDasharray = length;
      ekg.style.strokeDashoffset = length;
    }

    function animateEKG(){
      const length = ekg.getTotalLength();
      ekg.style.transition = 'none';
      ekg.style.strokeDashoffset = length;
      sweep.setAttribute('transform', 'translate(0,0)');

      requestAnimationFrame(()=>{
        requestAnimationFrame(()=>{
          ekg.style.transition = `stroke-dashoffset ${beatMs}ms ease-in-out`;
          ekg.style.strokeDashoffset = '0';
          sweep.style.transition = `transform ${beatMs}ms linear`;
          sweep.setAttribute('transform', 'translate(1200,0)');
        });
      });
    }

    setupEKG();
    setInterval(animateEKG, beatMs);
    animateEKG();

    // ---- Heartbeat sound sync ----
    setInterval(playHeartbeat, beatMs);

    // ---- Messages ----
    const messages = [
      "Inhale 4 ‚Ä¢ Hold 4 ‚Ä¢ Exhale 6 ‚Äî I'm with you.",
      "You are safe right now. Look around: name 5 things you see.",
      "Place a hand on your heart. Feel it beat for us.",
      "If your thoughts race, let them pass like clouds.",
      "You've survived 100% of your hardest days.",
      "Try this: relax your jaw, drop your shoulders, un‚Äëfurrow.",
      "Let's count together: 1‚Ä¶2‚Ä¶3‚Ä¶4. Slow is strong.",
      "Sip some water. Tiny sips. You deserve gentleness.",
      "It's okay to pause. Rest is productive for your heart.",
      "Breathe in calm, breathe out tension.",
      "You don't have to be perfect to be loved.",
      "Your feelings are valid. They will pass.",
      "One small step is still progress.",
      "Try the 5‚Äë4‚Äë3‚Äë2‚Äë1 senses game ‚Äî I'll do it with you.",
      "Your worth is not up for debate.",
      "Put both feet on the floor; feel the ground holding you.",
      "Text me one emoji to check‚Äëin. I'll know what it means.",
      "Close your eyes for 5 seconds ‚Äî open to something softer.",
      "I love you so much pookie.",
      "I love the human you are becoming, every day.",
      "You + Me = Forever Team üíò",
      "Your smile is my favorite superpower.",
      "I picked 'us' in every universe.",
      "Babe, you're my calm in any storm.",
      "You're cuter than a baby otter in a sweater.",
      "Certified Gorgeous‚Ñ¢ (peer‚Äëreviewed by me).",
      "I'm your pocket cheerleader ‚Äî always on call.",
      "You're my favorite notification.",
      "I'd share my fries with you. That's true love.",
      "If kisses were stars, you'd get the whole galaxy.",
      "Your laugh? Instant serotonin.",
      "You are my home address.",
      "Spoiler: We get a happy ending.",
      "I love you more than Wi‚ÄëFi on a plane.",
      "Hand? Mine. Always.",
      "You're the plot twist I prayed for.",
      "Our love playlist: heartbeats + giggles.",
      "BRB, falling for you again.",
      "Even your 'meh' is my 'wow'.",
      "My heart learned your name and hasn't stopped singing.",
      "You are never alone Baby",
      "Plagg is so proud of you!",
      "If i was there right now, I would jump on you and give you all the hugs and kisses",
      "You are the most special",
      "Why be sad when you have a FATTYYYY!!",
      "I LOVE YOUUUUUUUUUU!!!!",
    ];

    let i = 0;
    const msgEl = document.getElementById('message');

    function setMessage(index){
      msgEl.style.animation = 'none';
      setTimeout(() => {
        msgEl.textContent = messages[index % messages.length];
        msgEl.style.animation = 'msgFade 0.5s ease';
      }, 10);
    }
    setMessage(i);

    let msgTimer = setInterval(()=>{ 
      i = (i + 1) % messages.length; 
      setMessage(i); 
    }, 6000);

    document.getElementById('next').addEventListener('click', ()=>{ 
      i = (i + 1) % messages.length; 
      setMessage(i); 
      restartCycle(); 
    });
    
    document.getElementById('prev').addEventListener('click', ()=>{ 
      i = (i - 1 + messages.length) % messages.length; 
      setMessage(i); 
      restartCycle(); 
    });

    function restartCycle(){
      clearInterval(msgTimer);
      msgTimer = setInterval(()=>{ 
        i = (i + 1) % messages.length; 
        setMessage(i); 
      }, 6000);
    }
  </script>
</body>
</html>